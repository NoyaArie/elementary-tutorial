version: 2

models:
  - name: stg_customers
    config:
      tags: ["staging", "PII"]
    columns:
      - name: customer_id

  - name: stg_orders
    config:
      tags: ["staging", "finance"]
    columns:
      - name: order_id
      - name: status

  - name: stg_payments
    config:
      tags: ["staging", "finance"]
    columns:
      - name: payment_id
      - name: payment_method

    data_tests:
      - dbt_utils.fewer_rows_than:
          compare_model: ref('other_table_name')
          group_by_columns: # Optional, Columns to group by before executing the test
            - group_id
          config:
            tags:
              - elementary-tests
          meta:
            owner:
              - idan+222@elementary-data.com
              - joost@elementary-data.com
            description: dbt version 1.7
  - name: stg_signups
    config:
      tags: ["staging", "PII"]
    columns:
      - name: signup_id
      - name: customer_email
